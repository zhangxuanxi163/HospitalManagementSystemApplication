# 医院管理系统启动问题排查指南

## 快速诊断

运行以下脚本进行自动诊断：
```powershell
.\诊断启动问题.ps1
```

或运行快速修复脚本：
```powershell
.\快速修复启动问题.ps1
```

## 常见问题及解决方案

### 1. MySQL服务未运行

**症状：** 启动时提示无法连接到数据库

**解决方法：**
- 打开"服务"管理器（Win+R，输入 `services.msc`）
- 找到MySQL服务（通常是 `MySQL80`）
- 右键 -> 启动

或使用命令行：
```powershell
# 启动MySQL服务
Start-Service MySQL80

# 检查MySQL服务状态
Get-Service MySQL80
```

### 2. 数据库不存在

**症状：** 启动时提示 `Unknown database 'hospital_db'`

**解决方法：**
1. 打开MySQL命令行或MySQL Workbench
2. 运行 `创建数据库.sql` 脚本创建数据库
3. 或手动创建：
```sql
CREATE DATABASE hospital_db DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### 3. 端口8080被占用

**症状：** 启动时提示 `Port 8080 is already in use`

**解决方法：**
```powershell
# 查看占用8080端口的进程
netstat -ano | findstr :8080

# 结束进程（替换PID为实际进程ID）
taskkill /PID <进程ID> /F
```

或修改 `application.yml` 中的端口：
```yaml
server:
  port: 8081  # 改为其他端口
```

### 4. 项目未编译

**症状：** 启动时找不到类文件

**解决方法：**
- **在IDE中：** Build -> Rebuild Project
- **使用Maven：**
```bash
mvn clean compile
```

### 5. Java版本问题

**症状：** 启动时提示版本不兼容

**当前配置：** Java 17
**检测到版本：** Java 22（应该兼容）

如果遇到问题，可以：
- 安装Java 17
- 或在IDE中配置项目使用Java 17

### 6. 数据库连接配置错误

**检查配置文件：** `src/main/resources/application.yml`

确保以下配置正确：
- 数据库地址：`localhost:3306`
- 数据库名：`hospital_db`
- 用户名：`root`
- 密码：`root`（如果您的MySQL密码不同，请修改）

### 7. 依赖未下载

**症状：** 启动时提示找不到类

**解决方法：**
```bash
# 清理并重新下载依赖
mvn clean install

# 或在IDE中：右键pom.xml -> Maven -> Reload Project
```

## 启动步骤

1. **确保MySQL服务运行**
   ```powershell
   Get-Service MySQL80
   ```

2. **确保数据库已创建**
   - 运行 `创建数据库.sql`

3. **编译项目**
   - 在IDE中：Build -> Rebuild Project
   - 或使用：`mvn clean compile`

4. **启动项目**
   - 在IDE中运行 `HospitalManagementSystemApplication`
   - 或使用：`mvn spring-boot:run`

5. **访问系统**
   - 地址：http://localhost:8080/hospital
   - 默认账户：`admin` / `admin123`

## 查看详细错误信息

如果仍然无法启动，请查看控制台输出的完整错误信息，常见错误包括：

- **数据库连接失败：** 检查MySQL服务和数据库配置
- **端口占用：** 检查并结束占用端口的进程
- **类找不到：** 重新编译项目
- **依赖缺失：** 运行 `mvn clean install`

## 联系支持

如果以上方法都无法解决问题，请提供：
1. 完整的错误日志
2. Java版本：`java -version`
3. MySQL版本和状态
4. 项目编译状态

